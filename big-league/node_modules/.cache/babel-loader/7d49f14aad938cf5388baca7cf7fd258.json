{"ast":null,"code":"import _slicedToArray from\"/Users/bwhitmore6/Desktop/Projects/BigLeague/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import'antd/dist/antd.css';import{Button}from'antd';import{observer}from\"mobx-react\";import axios from\"axios\";import{StoreContext}from\"../../../models\";import{userQuery}from\"../../Utils/queries\";import{simSeasonChecker}from\"./SimSeasonChecker\";import{simButtonStyles}from\"./SimButtonStyles\";import BigLoading from\"../../Atoms/Loading/BigLoading\";import{ticketError,unusedActionError}from\"../../Atoms/notificationerrors\";export var SimSeasonButton=observer(function(){var store=useContext(StoreContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var email=localStorage.getItem('email')?localStorage.getItem('email'):'';var simSeason=function simSeason(){// sets seasonSimCheck as true\nstore.User.league.setSeasonSimCheck(true);// loops through each franchise, if check fails, sets seasonSim to false\nstore.User.franchise.league.franchiseSet.forEach(function(franchise){return simSeasonChecker(franchise,store.User.league);});//checks if user team has ticket pricing, if check fails, sets seasonSim to false\nif(store.User.franchise.seasonSet[store.User.franchise.seasonSet.length-1].ticketPrice===0||store.User.franchise.seasonSet[store.User.franchise.seasonSet.length-1].boxPrice===0){store.User.league.setSeasonSimCheck(false);return ticketError(store.User.franchise.franchise);}//checks if user team has actions available, if check fails, sets seasonSim to false\nif(store.User.franchise.action.numberOfActions>0){store.User.league.setSeasonSimCheck(false);return unusedActionError(store.User.franchise.franchise);}// if seasonSimCheck is false do not run season simulation\nif(store.User.league.seasonSimCheck===false){return;}var link='';if(window.location.port==='3000'){link=window.location.hostname+':8000';}else{link=window.location.host;}// season sim request\nvar data=new FormData();data.append(\"league_id\",store.User.franchise.league.id);data.append(\"season\",store.User.franchise.seasonSet.length);setLoading(true);axios.post(window.location.protocol+\"//\"+link+'/season_sim',data).then(function(res){console.log(res.data);store.queryUser({email:email},userQuery);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};var leagueReset=function leagueReset(){// reset league request\nvar data=new FormData();data.append(\"league_id\",store.User.franchise.league.id);setLoading(true);axios.post('http://127.0.0.1:8000/league_reset',data).then(function(res){console.log(res.data);store.queryUser({email:email},userQuery);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};if(loading)return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(BigLoading,{animation:\"ld ld-bounce\"}));else if(store.User.franchise.seasonSet.length===11)return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{textAlign:'center'}},\"Your Big League Journey Has Concluded\"),/*#__PURE__*/React.createElement(Button,{style:simButtonStyles,onClick:function onClick(){return leagueReset();},block:true},\"Click Here To Reset!\"));else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{style:simButtonStyles,onClick:function onClick(){return simSeason();},block:true},\"Simulate Season\"));}});export default SimSeasonButton;","map":{"version":3,"names":["React","useContext","useState","Button","observer","axios","StoreContext","userQuery","simSeasonChecker","simButtonStyles","BigLoading","ticketError","unusedActionError","SimSeasonButton","store","_useState","_useState2","_slicedToArray","loading","setLoading","email","localStorage","getItem","simSeason","User","league","setSeasonSimCheck","franchise","franchiseSet","forEach","seasonSet","length","ticketPrice","boxPrice","action","numberOfActions","seasonSimCheck","link","window","location","port","hostname","host","data","FormData","append","id","post","protocol","then","res","console","log","queryUser","catch","err","leagueReset","createElement","animation","style","textAlign","onClick","block"],"sources":["/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/Molecules/SimulationButtons/SimSeasonButton.tsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport {Button} from 'antd';\nimport {observer} from \"mobx-react\";\nimport axios from \"axios\";\nimport {FranchiseTypeModelType, StoreContext} from \"../../../models\";\nimport {userQuery} from \"../../Utils/queries\";\nimport {simSeasonChecker} from \"./SimSeasonChecker\";\nimport {simButtonStyles} from \"./SimButtonStyles\";\nimport BigLoading from \"../../Atoms/Loading/BigLoading\";\nimport {ticketError, unusedActionError} from \"../../Atoms/notificationerrors\";\n\n\nexport const SimSeasonButton: React.FunctionComponent = observer(() => {\n\n        const store = useContext(StoreContext)\n\n        const [loading, setLoading] = useState<boolean>(false)\n        const email: any = localStorage.getItem('email') ? localStorage.getItem('email') : '';\n\n        const simSeason = () => {\n\n            // sets seasonSimCheck as true\n            store.User.league.setSeasonSimCheck(true)\n            // loops through each franchise, if check fails, sets seasonSim to false\n            store.User.franchise.league.franchiseSet.forEach((franchise: FranchiseTypeModelType) =>\n                simSeasonChecker(franchise, store.User.league))\n            //checks if user team has ticket pricing, if check fails, sets seasonSim to false\n            if (store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].ticketPrice === 0\n                || store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].boxPrice === 0) {\n                store.User.league.setSeasonSimCheck(false)\n                return ticketError(store.User.franchise.franchise);\n            }\n            //checks if user team has actions available, if check fails, sets seasonSim to false\n            if (store.User.franchise.action.numberOfActions > 0) {\n                store.User.league.setSeasonSimCheck(false)\n                return unusedActionError(store.User.franchise.franchise);\n            }\n            // if seasonSimCheck is false do not run season simulation\n            if (store.User.league.seasonSimCheck === false) {\n                return\n            }\n\n            let link = '';\n            if (window.location.port === '3000') {\n                link = window.location.hostname + ':8000'\n            } else {\n                link = window.location.host\n            }\n            // season sim request\n            const data = new FormData();\n            data.append(\"league_id\", store.User.franchise.league.id)\n            data.append(\"season\", store.User.franchise.seasonSet.length)\n            setLoading(true)\n            axios.post(window.location.protocol + \"//\" + link + '/season_sim', data)\n                .then(res => {\n                    console.log(res.data)\n                    store.queryUser(\n                    {email: email},\n                    userQuery\n                    )\n                    setLoading(false)\n                })\n                .catch(err => {\n                    console.log(err)\n                    setLoading(false)\n                })\n        };\n\n        const leagueReset = () => {\n\n            // reset league request\n            const data = new FormData();\n            data.append(\"league_id\", store.User.franchise.league.id)\n            setLoading(true)\n            axios.post('http://127.0.0.1:8000/league_reset', data)\n                .then(res => {\n                    console.log(res.data)\n                    store.queryUser(\n                    {email: email},\n                    userQuery\n                    )\n                    setLoading(false)\n                })\n                .catch(err => {\n                    console.log(err)\n                    setLoading(false)\n                })\n        };\n\n        if (loading) return (\n            <div>\n                <BigLoading animation=\"ld ld-bounce\"/>\n            </div>\n        )\n        else if (store.User.franchise.seasonSet.length === 11) return (\n            <div>\n                <h1 style={{textAlign: 'center'}}>\n                    Your Big League Journey Has Concluded\n                </h1>\n                <Button style={simButtonStyles} onClick={() => leagueReset()} block>\n                        Click Here To Reset!\n                </Button>\n                </div>\n        )\n        else {\n            return (\n                <div>\n                    <Button style={simButtonStyles} onClick={() => simSeason()} block>\n                        Simulate Season\n                    </Button>\n                </div>\n            );\n        }\n    }\n)\n\nexport default SimSeasonButton;"],"mappings":"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"},"metadata":{},"sourceType":"module"}