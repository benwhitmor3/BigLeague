{"ast":null,"code":"var _jsxFileName = \"/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/Molecules/SimulationButtons/SimSeasonButton.tsx\";\nimport React, { useContext, useState } from 'react';\nimport 'antd/dist/antd.css';\nimport { Button } from 'antd';\nimport { observer } from \"mobx-react\";\nimport axios from \"axios\";\nimport { StoreContext } from \"../../../models\";\nimport { userQuery } from \"../../Utils/queries\";\nimport { simSeasonChecker } from \"./SimSeasonChecker\";\nimport { simButtonStyles } from \"./SimButtonStyles\";\nimport BigLoading from \"../../Atoms/Loading/BigLoading\";\nimport { ticketError, unusedActionError } from \"../../Atoms/notificationerrors\";\nexport const SimSeasonButton = observer(() => {\n  const store = useContext(StoreContext);\n  const [loading, setLoading] = useState(false);\n  const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\n  const simSeason = () => {\n    // sets seasonSimCheck as true\n    store.User.league.setSeasonSimCheck(true);\n    // loops through each franchise, if check fails, sets seasonSim to false\n    store.User.franchise.league.franchiseSet.forEach(franchise => simSeasonChecker(franchise, store.User.league));\n    //checks if user team has ticket pricing, if check fails, sets seasonSim to false\n    if (store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].ticketPrice === 0 || store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].boxPrice === 0) {\n      store.User.league.setSeasonSimCheck(false);\n      return ticketError(store.User.franchise.franchise);\n    }\n    //checks if user team has actions available, if check fails, sets seasonSim to false\n    if (store.User.franchise.action.numberOfActions > 0) {\n      store.User.league.setSeasonSimCheck(false);\n      return unusedActionError(store.User.franchise.franchise);\n    }\n    // if seasonSimCheck is false do not run season simulation\n    if (store.User.league.seasonSimCheck === false) {\n      return;\n    }\n    let link = '';\n    if (window.location.port === '3000') {\n      link = window.location.hostname + ':8000';\n    } else {\n      link = window.location.host;\n    }\n    // season sim request\n    const data = new FormData();\n    data.append(\"league_id\", store.User.franchise.league.id);\n    data.append(\"season\", store.User.franchise.seasonSet.length);\n    setLoading(true);\n    axios.post(window.location.protocol + \"//\" + link + '/season_sim', data).then(res => {\n      console.log(res.data);\n      store.queryUser({\n        email: email\n      }, userQuery);\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n  const leagueReset = () => {\n    // reset league request\n    const data = new FormData();\n    data.append(\"league_id\", store.User.franchise.league.id);\n    setLoading(true);\n    axios.post('http://127.0.0.1:8000/league_reset', data).then(res => {\n      console.log(res.data);\n      store.queryUser({\n        email: email\n      }, userQuery);\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n      setLoading(false);\n    });\n  };\n  if (loading) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BigLoading, {\n    animation: \"ld ld-bounce\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }));else if (store.User.franchise.seasonSet.length === 11) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"Your Big League Journey Has Concluded\"), /*#__PURE__*/React.createElement(Button, {\n    style: simButtonStyles,\n    onClick: () => leagueReset(),\n    block: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"Click Here To Reset!\"));else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      style: simButtonStyles,\n      onClick: () => simSeason(),\n      block: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, \"Simulate Season\"));\n  }\n});\nexport default SimSeasonButton;","map":{"version":3,"names":["React","useContext","useState","Button","observer","axios","StoreContext","userQuery","simSeasonChecker","simButtonStyles","BigLoading","ticketError","unusedActionError","SimSeasonButton","store","loading","setLoading","email","localStorage","getItem","simSeason","User","league","setSeasonSimCheck","franchise","franchiseSet","forEach","seasonSet","length","ticketPrice","boxPrice","action","numberOfActions","seasonSimCheck","link","window","location","port","hostname","host","data","FormData","append","id","post","protocol","then","res","console","log","queryUser","catch","err","leagueReset","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","animation","style","textAlign","onClick","block"],"sources":["/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/Molecules/SimulationButtons/SimSeasonButton.tsx"],"sourcesContent":["import React, {useContext, useState} from 'react';\nimport 'antd/dist/antd.css';\nimport {Button} from 'antd';\nimport {observer} from \"mobx-react\";\nimport axios from \"axios\";\nimport {FranchiseTypeModelType, StoreContext} from \"../../../models\";\nimport {userQuery} from \"../../Utils/queries\";\nimport {simSeasonChecker} from \"./SimSeasonChecker\";\nimport {simButtonStyles} from \"./SimButtonStyles\";\nimport BigLoading from \"../../Atoms/Loading/BigLoading\";\nimport {ticketError, unusedActionError} from \"../../Atoms/notificationerrors\";\n\n\nexport const SimSeasonButton: React.FunctionComponent = observer(() => {\n\n        const store = useContext(StoreContext)\n\n        const [loading, setLoading] = useState<boolean>(false)\n        const email: any = localStorage.getItem('email') ? localStorage.getItem('email') : '';\n\n        const simSeason = () => {\n\n            // sets seasonSimCheck as true\n            store.User.league.setSeasonSimCheck(true)\n            // loops through each franchise, if check fails, sets seasonSim to false\n            store.User.franchise.league.franchiseSet.forEach((franchise: FranchiseTypeModelType) =>\n                simSeasonChecker(franchise, store.User.league))\n            //checks if user team has ticket pricing, if check fails, sets seasonSim to false\n            if (store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].ticketPrice === 0\n                || store.User.franchise.seasonSet[store.User.franchise.seasonSet.length - 1].boxPrice === 0) {\n                store.User.league.setSeasonSimCheck(false)\n                return ticketError(store.User.franchise.franchise);\n            }\n            //checks if user team has actions available, if check fails, sets seasonSim to false\n            if (store.User.franchise.action.numberOfActions > 0) {\n                store.User.league.setSeasonSimCheck(false)\n                return unusedActionError(store.User.franchise.franchise);\n            }\n            // if seasonSimCheck is false do not run season simulation\n            if (store.User.league.seasonSimCheck === false) {\n                return\n            }\n\n            let link = '';\n            if (window.location.port === '3000') {\n                link = window.location.hostname + ':8000'\n            } else {\n                link = window.location.host\n            }\n            // season sim request\n            const data = new FormData();\n            data.append(\"league_id\", store.User.franchise.league.id)\n            data.append(\"season\", store.User.franchise.seasonSet.length)\n            setLoading(true)\n            axios.post(window.location.protocol + \"//\" + link + '/season_sim', data)\n                .then(res => {\n                    console.log(res.data)\n                    store.queryUser(\n                    {email: email},\n                    userQuery\n                    )\n                    setLoading(false)\n                })\n                .catch(err => {\n                    console.log(err)\n                    setLoading(false)\n                })\n        };\n\n        const leagueReset = () => {\n\n            // reset league request\n            const data = new FormData();\n            data.append(\"league_id\", store.User.franchise.league.id)\n            setLoading(true)\n            axios.post('http://127.0.0.1:8000/league_reset', data)\n                .then(res => {\n                    console.log(res.data)\n                    store.queryUser(\n                    {email: email},\n                    userQuery\n                    )\n                    setLoading(false)\n                })\n                .catch(err => {\n                    console.log(err)\n                    setLoading(false)\n                })\n        };\n\n        if (loading) return (\n            <div>\n                <BigLoading animation=\"ld ld-bounce\"/>\n            </div>\n        )\n        else if (store.User.franchise.seasonSet.length === 11) return (\n            <div>\n                <h1 style={{textAlign: 'center'}}>\n                    Your Big League Journey Has Concluded\n                </h1>\n                <Button style={simButtonStyles} onClick={() => leagueReset()} block>\n                        Click Here To Reset!\n                </Button>\n                </div>\n        )\n        else {\n            return (\n                <div>\n                    <Button style={simButtonStyles} onClick={() => simSeason()} block>\n                        Simulate Season\n                    </Button>\n                </div>\n            );\n        }\n    }\n)\n\nexport default SimSeasonButton;"],"mappings":"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"},"metadata":{},"sourceType":"module"}