{"ast":null,"code":"import _slicedToArray from \"/Users/bwhitmore6/Desktop/Projects/BigLeague/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/bwhitmore6/Desktop/Projects/BigLeague/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _this = this,\n  _jsxFileName = \"/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/LoginForm.tsx\";\nimport React, { useReducer, useContext } from 'react';\nimport { Alert, Button, Card, Input, Space } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { StoreContext } from \"../models\";\nimport { observer } from \"mobx-react\";\nimport { buttonStyles } from \"./Molecules/Create/CreateStyles\";\n\n//state type (using redux for practice)\n\nvar initialState = {\n  email: '',\n  password: '',\n  isError: false\n};\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'setEmail':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        email: action.payload\n      });\n    case 'setPassword':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        password: action.payload\n      });\n    case 'setIsError':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isError: action.payload\n      });\n  }\n};\nvar LoginForm = observer(function () {\n  var _useReducer = useReducer(reducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var navigate = useNavigate();\n  var store = useContext(StoreContext);\n  var handleLogin = function handleLogin(e, data) {\n    // this is for switching local between react and backend static local (3000 vs. 8000)\n    var link = '';\n    if (window.location.port === '3000') {\n      link = window.location.hostname + ':8000';\n    } else {\n      link = window.location.host;\n    }\n    e.preventDefault();\n    fetch(window.location.protocol + \"//\" + link + '/token-auth/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(res);\n    }).then(function (json) {\n      console.log(json);\n      localStorage.setItem('token', json.token);\n      localStorage.setItem('email', json.user.email);\n      store.setUser(json.user.email).then(function (r) {\n        return console.log(\"SET USER\");\n      });\n      store.setIsLoggedIn(true);\n      navigate('/Home');\n    }).catch(function (response) {\n      console.log(response.status, response.statusText);\n      dispatch({\n        type: 'setIsError',\n        payload: true\n      });\n    });\n  };\n  var handleEmailChange = function handleEmailChange(event) {\n    dispatch({\n      type: 'setEmail',\n      payload: event.target.value\n    });\n  };\n  var handlePasswordChange = function handlePasswordChange(event) {\n    dispatch({\n      type: 'setPassword',\n      payload: event.target.value\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '20px'\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      display: 'inline-block',\n      width: '30%'\n    },\n    title: \"Login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    onChange: handleEmailChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: handlePasswordChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    color: \"primary\"\n    // @ts-ignore\n    ,\n    style: buttonStyles,\n    onClick: function onClick(e) {\n      return handleLogin(e, state);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, \"Login\"), state.isError ? /*#__PURE__*/React.createElement(Alert, {\n    message: \"Login Failed\",\n    description: \"\",\n    type: \"error\",\n    showIcon: true,\n    closable: true,\n    onClose: function onClose() {\n      dispatch({\n        type: 'setIsError',\n        payload: false\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }) : null)));\n});\nexport default LoginForm;","map":{"version":3,"names":["React","useReducer","useContext","Alert","Button","Card","Input","Space","useNavigate","StoreContext","observer","buttonStyles","initialState","email","password","isError","reducer","state","action","type","_objectSpread","payload","LoginForm","_useReducer","_useReducer2","_slicedToArray","dispatch","navigate","store","handleLogin","e","data","link","window","location","port","hostname","host","preventDefault","fetch","protocol","method","headers","body","JSON","stringify","then","res","ok","json","Promise","reject","console","log","localStorage","setItem","token","user","setUser","r","setIsLoggedIn","catch","response","status","statusText","handleEmailChange","event","target","value","handlePasswordChange","createElement","style","textAlign","marginTop","noValidate","autoComplete","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","display","width","title","direction","id","placeholder","onChange","size","color","onClick","message","description","showIcon","closable","onClose"],"sources":["/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/LoginForm.tsx"],"sourcesContent":["import React, {useReducer, useContext} from 'react';\nimport {Alert, Button, Card, Input, Space} from 'antd';\nimport {useNavigate} from 'react-router-dom';\nimport {StoreContext} from \"../models\";\nimport {observer} from \"mobx-react\";\nimport {buttonStyles} from \"./Molecules/Create/CreateStyles\";\n\n\n//state type (using redux for practice)\ntype State = {\n    email: string\n    password: string\n    isError: boolean\n};\n\nconst initialState: State = {\n    email: '',\n    password: '',\n    isError: false\n};\n\ntype Action =\n    | { type: 'setEmail', payload: string }\n    | { type: 'setPassword', payload: string }\n    | { type: 'setIsError', payload: boolean };\n\nconst reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n        case 'setEmail':\n            return {\n                ...state,\n                email: action.payload\n            };\n        case 'setPassword':\n            return {\n                ...state,\n                password: action.payload\n            };\n        case 'setIsError':\n            return {\n                ...state,\n                isError: action.payload\n            };\n    }\n}\n\nconst LoginForm: React.FunctionComponent = observer(() => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const navigate = useNavigate();\n\n    const store = useContext(StoreContext)\n\n    const handleLogin = (e: any, data: any) => {\n        // this is for switching local between react and backend static local (3000 vs. 8000)\n        let link = '';\n        if (window.location.port === '3000') {\n            link = window.location.hostname + ':8000'\n        } else {\n            link = window.location.host\n        }\n        e.preventDefault();\n        fetch(window.location.protocol + \"//\" + link + '/token-auth/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(res)\n            })\n            .then(json => {\n                console.log(json)\n                localStorage.setItem('token', json.token);\n                localStorage.setItem('email', json.user.email);\n                store.setUser(json.user.email).then(r => console.log(\"SET USER\"));\n                store.setIsLoggedIn(true)\n                navigate('/Home');\n            })\n            .catch((response) => {\n                console.log(response.status, response.statusText);\n                dispatch({type: 'setIsError', payload: true})\n            });\n    };\n\n    const handleEmailChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setEmail',\n                payload: event.target.value\n            });\n        };\n\n    const handlePasswordChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setPassword',\n                payload: event.target.value\n            });\n        }\n    return (\n        <form style={{textAlign: 'center', marginTop: '20px'}} noValidate autoComplete=\"off\">\n            <Card style={{display: 'inline-block', width: '30%'}} title=\"Login\">\n                <Space direction=\"vertical\">\n                    <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={handleEmailChange}\n                    />\n                    <Input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={handlePasswordChange}\n                    />\n                    <Button\n                        size=\"large\"\n                        color=\"primary\"\n                        // @ts-ignore\n                        style={buttonStyles}\n                        onClick={(e) => handleLogin(e, state)}>\n                        Login\n                    </Button>\n                    {state.isError ?\n                        <Alert\n                            message=\"Login Failed\"\n                            description=\"\"\n                            type=\"error\"\n                            showIcon\n                            closable\n                            onClose={() => {\n                                dispatch({\n                                    type: 'setIsError',\n                                    payload: false\n                                })\n                            }}\n                        /> : null}\n                </Space>\n            </Card>\n        </form>\n    );\n})\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}