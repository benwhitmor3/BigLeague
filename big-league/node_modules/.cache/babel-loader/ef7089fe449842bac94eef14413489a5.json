{"ast":null,"code":"var _jsxFileName = \"/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/LoginForm.tsx\";\nimport React, { useReducer, useContext } from 'react';\nimport { Alert, Button, Card, Input, Space } from 'antd';\nimport { useNavigate } from 'react-router-dom';\nimport { StoreContext } from \"../models\";\nimport { observer } from \"mobx-react\";\nimport { buttonStyles } from \"./Molecules/Create/CreateStyles\";\n\n//state type (using redux for practice)\n\nconst initialState = {\n  email: '',\n  password: '',\n  isError: false\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'setEmail':\n      return {\n        ...state,\n        email: action.payload\n      };\n    case 'setPassword':\n      return {\n        ...state,\n        password: action.payload\n      };\n    case 'setIsError':\n      return {\n        ...state,\n        isError: action.payload\n      };\n  }\n};\nconst LoginForm = observer(() => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const navigate = useNavigate();\n  const store = useContext(StoreContext);\n  console.log(\"hello\");\n  const handleLogin = (e, data) => {\n    // this is for switching local between react and backend static local (3000 vs. 8000)\n    let link = '';\n    if (window.location.port === '3000') {\n      link = window.location.hostname + ':8000';\n    } else {\n      link = window.location.host;\n    }\n    e.preventDefault();\n    fetch(window.location.protocol + \"//\" + link + '/token-auth/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(res);\n    }).then(json => {\n      console.log(json);\n      localStorage.setItem('token', json.access);\n      localStorage.setItem('refresh', json.refresh);\n      localStorage.setItem('email', data.email);\n      store.setUser(data.email).then(() => console.log(\"SET USER\"));\n      store.setIsLoggedIn(true);\n      navigate('/Home');\n    }).catch(response => {\n      console.log(response.status, response.statusText);\n      dispatch({\n        type: 'setIsError',\n        payload: true\n      });\n    });\n  };\n  const handleEmailChange = event => {\n    dispatch({\n      type: 'setEmail',\n      payload: event.target.value\n    });\n  };\n  const handlePasswordChange = event => {\n    dispatch({\n      type: 'setPassword',\n      payload: event.target.value\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '20px'\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      display: 'inline-block',\n      width: '30%'\n    },\n    title: \"Login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    onChange: handleEmailChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: handlePasswordChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    color: \"primary\"\n    // @ts-ignore\n    ,\n    style: buttonStyles,\n    onClick: e => handleLogin(e, state),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, \"Login\"), state.isError ? /*#__PURE__*/React.createElement(Alert, {\n    message: \"Login Failed\",\n    description: \"\",\n    type: \"error\",\n    showIcon: true,\n    closable: true,\n    onClose: () => {\n      dispatch({\n        type: 'setIsError',\n        payload: false\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }) : null)));\n});\nexport default LoginForm;","map":{"version":3,"names":["React","useReducer","useContext","Alert","Button","Card","Input","Space","useNavigate","StoreContext","observer","buttonStyles","initialState","email","password","isError","reducer","state","action","type","payload","LoginForm","dispatch","navigate","store","console","log","handleLogin","e","data","link","window","location","port","hostname","host","preventDefault","fetch","protocol","method","headers","body","JSON","stringify","then","res","ok","json","Promise","reject","localStorage","setItem","access","refresh","setUser","setIsLoggedIn","catch","response","status","statusText","handleEmailChange","event","target","value","handlePasswordChange","createElement","style","textAlign","marginTop","noValidate","autoComplete","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","display","width","title","direction","id","placeholder","onChange","size","color","onClick","message","description","showIcon","closable","onClose"],"sources":["/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/LoginForm.tsx"],"sourcesContent":["import React, {useReducer, useContext} from 'react';\nimport {Alert, Button, Card, Input, Space} from 'antd';\nimport {useNavigate} from 'react-router-dom';\nimport {StoreContext} from \"../models\";\nimport {observer} from \"mobx-react\";\nimport {buttonStyles} from \"./Molecules/Create/CreateStyles\";\n\n\n//state type (using redux for practice)\ntype State = {\n    email: string\n    password: string\n    isError: boolean\n};\n\nconst initialState: State = {\n    email: '',\n    password: '',\n    isError: false\n};\n\ntype Action =\n    | { type: 'setEmail', payload: string }\n    | { type: 'setPassword', payload: string }\n    | { type: 'setIsError', payload: boolean };\n\nconst reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n        case 'setEmail':\n            return {\n                ...state,\n                email: action.payload\n            };\n        case 'setPassword':\n            return {\n                ...state,\n                password: action.payload\n            };\n        case 'setIsError':\n            return {\n                ...state,\n                isError: action.payload\n            };\n    }\n}\n\nconst LoginForm: React.FunctionComponent = observer(() => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const navigate = useNavigate();\n\n    const store = useContext(StoreContext)\n    console.log(\"hello\")\n    const handleLogin = (e: any, data: any) => {\n        // this is for switching local between react and backend static local (3000 vs. 8000)\n        let link = '';\n        if (window.location.port === '3000') {\n            link = window.location.hostname + ':8000'\n        } else {\n            link = window.location.host\n        }\n        e.preventDefault();\n        fetch(window.location.protocol + \"//\" + link + '/token-auth/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(res)\n            })\n            .then(json => {\n                console.log(json)\n                localStorage.setItem('token', json.access);\n                localStorage.setItem('refresh', json.refresh);\n                localStorage.setItem('email', data.email);\n                store.setUser(data.email).then(() => console.log(\"SET USER\"));\n                store.setIsLoggedIn(true)\n                navigate('/Home');\n            })\n            .catch((response) => {\n                console.log(response.status, response.statusText);\n                dispatch({type: 'setIsError', payload: true})\n            });\n    };\n\n    const handleEmailChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setEmail',\n                payload: event.target.value\n            });\n        };\n\n    const handlePasswordChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setPassword',\n                payload: event.target.value\n            });\n        }\n    return (\n        <form style={{textAlign: 'center', marginTop: '20px'}} noValidate autoComplete=\"off\">\n            <Card style={{display: 'inline-block', width: '30%'}} title=\"Login\">\n                <Space direction=\"vertical\">\n                    <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={handleEmailChange}\n                    />\n                    <Input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={handlePasswordChange}\n                    />\n                    <Button\n                        size=\"large\"\n                        color=\"primary\"\n                        // @ts-ignore\n                        style={buttonStyles}\n                        onClick={(e) => handleLogin(e, state)}>\n                        Login\n                    </Button>\n                    {state.isError ?\n                        <Alert\n                            message=\"Login Failed\"\n                            description=\"\"\n                            type=\"error\"\n                            showIcon\n                            closable\n                            onClose={() => {\n                                dispatch({\n                                    type: 'setIsError',\n                                    payload: false\n                                })\n                            }}\n                        /> : null}\n                </Space>\n            </Card>\n        </form>\n    );\n})\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}