{"ast":null,"code":"import _slicedToArray from\"/Users/bwhitmore6/Desktop/Projects/BigLeague/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/bwhitmore6/Desktop/Projects/BigLeague/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useReducer,useContext}from'react';import{Alert,Button,Card,Input,Space}from'antd';import{useNavigate}from'react-router-dom';import{StoreContext}from\"../models\";import{observer}from\"mobx-react\";import{buttonStyles}from\"./Molecules/Create/CreateStyles\";//state type (using redux for practice)\nvar initialState={email:'',password:'',isError:false};var reducer=function reducer(state,action){switch(action.type){case'setEmail':return _objectSpread(_objectSpread({},state),{},{email:action.payload});case'setPassword':return _objectSpread(_objectSpread({},state),{},{password:action.payload});case'setIsError':return _objectSpread(_objectSpread({},state),{},{isError:action.payload});}};var LoginForm=observer(function(){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var navigate=useNavigate();var store=useContext(StoreContext);var handleLogin=function handleLogin(e,data){// this is for switching local between react and backend static local (3000 vs. 8000)\nvar link='';if(window.location.port==='3000'){link=window.location.hostname+':8000';}else{link=window.location.host;}e.preventDefault();fetch(window.location.protocol+\"//\"+link+'/token-auth/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(res){if(res.ok){return res.json();}return Promise.reject(res);}).then(function(json){console.log(json);localStorage.setItem('token',json.access);localStorage.setItem('refresh',json.refresh);localStorage.setItem('email',data.email);store.setUser(data.email).then(function(){return console.log(\"SET USER\");});store.setIsLoggedIn(true);navigate('/Home');}).catch(function(response){console.log(response.status,response.statusText);dispatch({type:'setIsError',payload:true});});};var handleEmailChange=function handleEmailChange(event){dispatch({type:'setEmail',payload:event.target.value});};var handlePasswordChange=function handlePasswordChange(event){dispatch({type:'setPassword',payload:event.target.value});};return/*#__PURE__*/React.createElement(\"form\",{style:{textAlign:'center',marginTop:'20px'},noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(Card,{style:{display:'inline-block',width:'30%'},title:\"Login\"},/*#__PURE__*/React.createElement(Space,{direction:\"vertical\"},/*#__PURE__*/React.createElement(Input,{id:\"email\",type:\"email\",placeholder:\"Email\",onChange:handleEmailChange}),/*#__PURE__*/React.createElement(Input,{id:\"password\",type:\"password\",placeholder:\"Password\",onChange:handlePasswordChange}),/*#__PURE__*/React.createElement(Button,{size:\"large\",color:\"primary\"// @ts-ignore\n,style:buttonStyles,onClick:function onClick(e){return handleLogin(e,state);}},\"Login\"),state.isError?/*#__PURE__*/React.createElement(Alert,{message:\"Login Failed\",description:\"\",type:\"error\",showIcon:true,closable:true,onClose:function onClose(){dispatch({type:'setIsError',payload:false});}}):null)));});export default LoginForm;","map":{"version":3,"names":["React","useReducer","useContext","Alert","Button","Card","Input","Space","useNavigate","StoreContext","observer","buttonStyles","initialState","email","password","isError","reducer","state","action","type","_objectSpread","payload","LoginForm","_useReducer","_useReducer2","_slicedToArray","dispatch","navigate","store","handleLogin","e","data","link","window","location","port","hostname","host","preventDefault","fetch","protocol","method","headers","body","JSON","stringify","then","res","ok","json","Promise","reject","console","log","localStorage","setItem","access","refresh","setUser","setIsLoggedIn","catch","response","status","statusText","handleEmailChange","event","target","value","handlePasswordChange","createElement","style","textAlign","marginTop","noValidate","autoComplete","display","width","title","direction","id","placeholder","onChange","size","color","onClick","message","description","showIcon","closable","onClose"],"sources":["/Users/bwhitmore6/Desktop/Projects/BigLeague/src/Pages/LoginForm.tsx"],"sourcesContent":["import React, {useReducer, useContext} from 'react';\nimport {Alert, Button, Card, Input, Space} from 'antd';\nimport {useNavigate} from 'react-router-dom';\nimport {StoreContext} from \"../models\";\nimport {observer} from \"mobx-react\";\nimport {buttonStyles} from \"./Molecules/Create/CreateStyles\";\n\n\n//state type (using redux for practice)\ntype State = {\n    email: string\n    password: string\n    isError: boolean\n};\n\nconst initialState: State = {\n    email: '',\n    password: '',\n    isError: false\n};\n\ntype Action =\n    | { type: 'setEmail', payload: string }\n    | { type: 'setPassword', payload: string }\n    | { type: 'setIsError', payload: boolean };\n\nconst reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n        case 'setEmail':\n            return {\n                ...state,\n                email: action.payload\n            };\n        case 'setPassword':\n            return {\n                ...state,\n                password: action.payload\n            };\n        case 'setIsError':\n            return {\n                ...state,\n                isError: action.payload\n            };\n    }\n}\n\nconst LoginForm: React.FunctionComponent = observer(() => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const navigate = useNavigate();\n\n    const store = useContext(StoreContext)\n    const handleLogin = (e: any, data: any) => {\n        // this is for switching local between react and backend static local (3000 vs. 8000)\n        let link = '';\n        if (window.location.port === '3000') {\n            link = window.location.hostname + ':8000'\n        } else {\n            link = window.location.host\n        }\n        e.preventDefault();\n        fetch(window.location.protocol + \"//\" + link + '/token-auth/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(data)\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(res)\n            })\n            .then(json => {\n                console.log(json)\n                localStorage.setItem('token', json.access);\n                localStorage.setItem('refresh', json.refresh);\n                localStorage.setItem('email', data.email);\n                store.setUser(data.email).then(() => console.log(\"SET USER\"));\n                store.setIsLoggedIn(true)\n                navigate('/Home');\n            })\n            .catch((response) => {\n                console.log(response.status, response.statusText);\n                dispatch({type: 'setIsError', payload: true})\n            });\n    };\n\n    const handleEmailChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setEmail',\n                payload: event.target.value\n            });\n        };\n\n    const handlePasswordChange: React.ChangeEventHandler<HTMLInputElement> =\n        (event) => {\n            dispatch({\n                type: 'setPassword',\n                payload: event.target.value\n            });\n        }\n    return (\n        <form style={{textAlign: 'center', marginTop: '20px'}} noValidate autoComplete=\"off\">\n            <Card style={{display: 'inline-block', width: '30%'}} title=\"Login\">\n                <Space direction=\"vertical\">\n                    <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={handleEmailChange}\n                    />\n                    <Input\n                        id=\"password\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={handlePasswordChange}\n                    />\n                    <Button\n                        size=\"large\"\n                        color=\"primary\"\n                        // @ts-ignore\n                        style={buttonStyles}\n                        onClick={(e) => handleLogin(e, state)}>\n                        Login\n                    </Button>\n                    {state.isError ?\n                        <Alert\n                            message=\"Login Failed\"\n                            description=\"\"\n                            type=\"error\"\n                            showIcon\n                            closable\n                            onClose={() => {\n                                dispatch({\n                                    type: 'setIsError',\n                                    payload: false\n                                })\n                            }}\n                        /> : null}\n                </Space>\n            </Card>\n        </form>\n    );\n})\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}